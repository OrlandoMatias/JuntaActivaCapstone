{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Sistema de Gesti贸n Vecinal{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/estilos.css' %}?v=2.0">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="{% url 'home' %}" class="nav-brand">Junta de Vecinos</a>
            <ul class="nav-menu">
                <li><a href="{% url 'home' %}">Inicio</a></li>
                <li><a href="{% url 'listar_noticias' %}">Noticias</a></li>
                <li><a href="{% url 'listar_actividades' %}">Actividades</a></li>
                
                {% if user.is_authenticated %}
                    {# Men煤 de Reservas (para todos los usuarios autenticados) #}
                    <li class="nav-divider">|</li>
                    <li><a href="{% url 'listar_espacios' %}">Reservas</a></li>
                    
                    {% if user.is_staff %}
                        {# Men煤 para administradores #}
                        <li class="nav-divider">|</li>
                        <li><a href="{% url 'lista_vecinos' %}">Gesti贸n Vecinos</a></li>
                        <li><a href="{% url 'listar_certificados' %}">Gesti贸n Certificados</a></li>
                        <li><a href="{% url 'listar_proyectos' %}">Gesti贸n Proyectos</a></li>
                        <li><a href="{% url 'crear_noticia' %}">Crear Noticia</a></li>
                    {% else %}
                        {# Men煤 para vecinos #}
                        <li class="nav-divider">|</li>
                        <li><a href="{% url 'solicitar_certificado' %}">Solicitar Certificado</a></li>
                        <li><a href="{% url 'postular_proyecto' %}">Postular Proyecto</a></li>
                        <li><a href="{% url 'listar_certificados' %}">Mis Certificados</a></li>
                        <li><a href="{% url 'listar_proyectos' %}">Mis Proyectos</a></li>
                    {% endif %}
                    <li class="nav-divider">|</li>
                    <li><a href="{% url 'logout' %}">Cerrar Sesi贸n ({{ user.first_name }})</a></li>
                {% else %}
                    <li><a href="{% url 'registrar_vecino' %}">Registrarse</a></li>
                    <li class="nav-divider">|</li>
                    <li><a href="{% url 'login' %}">Iniciar Sesi贸n</a></li>
                {% endif %}
            </ul>
        </div>
    </nav>

    {% if messages %}
    <div class="toast-container">
        {% for message in messages %}
        <div class="toast toast-{{ message.tags }}" data-toast>
            <div class="toast-icon">
                {% if message.tags == 'success' %}
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 6L9 17l-5-5"/>
                    </svg>
                {% elif message.tags == 'error' or message.tags == 'danger' %}
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="15" y1="9" x2="9" y2="15"/>
                        <line x1="9" y1="9" x2="15" y2="15"/>
                    </svg>
                {% elif message.tags == 'warning' %}
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                        <line x1="12" y1="9" x2="12" y2="13"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                {% else %}
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="16" x2="12" y2="12"/>
                        <line x1="12" y1="8" x2="12.01" y2="8"/>
                    </svg>
                {% endif %}
            </div>
            <div class="toast-content">
                <div class="toast-message">{{ message }}</div>
            </div>
            <button class="toast-close" onclick="this.parentElement.remove()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        {% endfor %}
    </div>
    
    <script>
        // Auto-cerrar notificaciones despu茅s de 5 segundos
        document.addEventListener('DOMContentLoaded', function() {
            const toasts = document.querySelectorAll('[data-toast]');
            toasts.forEach(function(toast) {
                setTimeout(function() {
                    toast.style.animation = 'slideOut 0.3s ease-out forwards';
                    setTimeout(function() {
                        toast.remove();
                    }, 300);
                }, 5000);
            });
        });
    </script>
    {% endif %}

    <main class="main-content">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3> Ubicaci贸n</h3>
                    <p>Av. Vicu帽a Mackenna #4917</p>
                    <p>San Joaquin,Region Metropolitana </p>
                    <p>Chile</p>
                </div>
                
                <div class="footer-section">
                    <h3> Contacto</h3>
                    <p>Tel茅fono: +56 9 8405 2867</p>
                    <p>Email: el.lopezg@duocuc.cl</p>
                    <p>Horario: Lun-Vie 9:00-18:00</p>
                </div>
                
                <div class="footer-section">
                    <h3> Enlaces R谩pidos</h3>
                    <p><a href="{% url 'home' %}">Inicio</a></p>
                    <p><a href="{% url 'listar_noticias' %}">Noticias</a></p>
                    <p><a href="{% url 'listar_actividades' %}">Actividades</a></p>
                </div>
                
                <div class="footer-section">
                    <h3>癸 Informaci贸n</h3>
                    <p>Sistema de Gesti贸n Vecinal</p>
                    <p>Desarrollado con Django</p>
                    <p>&copy; 2025 JuntaActiva</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>Todos los derechos reservados</p>
            </div>
        </div>
    </footer>
</body>
</html>
